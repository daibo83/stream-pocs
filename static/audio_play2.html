<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Websocket Opus Player</title>
    <script src="ws-audio-api.min.js"></script>
</head>
<body>
    <button id="startButton">Start Playing</button>
    <button id="stopButton" disabled>Stop Playing</button>
    <div id="status">Not connected</div>

    <script>
        const startButton = document.getElementById('startButton');
        const startButton2 = document.getElementById('startButton2');
        const statusDiv = document.getElementById('status');
        var player = new WSAudioAPI.Player({
            codec: {
                sampleRate: 48000,
                channels: 1,
                app: 2051,
                frameDuration: 2.5,
                bufferSize: 256
            },
            server: `wss://${window.location.host}/consume/test_stream_audio`,
        });
        startButton.onclick = async () => {
            // try {
                await player.start();
                startButton.disabled = true;
                stopButton.disabled = false;
                statusDiv.textContent = 'Playing...';
            // } catch (e) {
            //     // console.error(e);
            //     statusDiv.textContent = 'Failed to start playing';
            // }
        };
    </script>
</body>
</html>